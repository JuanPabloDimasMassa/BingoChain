<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü¶ä Conectar MetaMask a Ganache Local</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh; color: white; padding: 20px;
        }
        .container { max-width: 1000px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { font-size: 2.5em; margin-bottom: 10px; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        .step-card {
            background: rgba(255, 255, 255, 0.1); padding: 25px;
            border-radius: 15px; margin-bottom: 20px; backdrop-filter: blur(10px);
        }
        .step-number {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            width: 40px; height: 40px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; margin-bottom: 15px; font-size: 1.2em;
        }
        .code-box {
            background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 8px;
            font-family: monospace; margin: 15px 0; border-left: 4px solid #00b894;
        }
        .warning-box {
            background: rgba(241, 196, 15, 0.2); padding: 15px; border-radius: 8px;
            border-left: 4px solid #f1c40f; margin: 15px 0;
        }
        .success-box {
            background: rgba(46, 204, 113, 0.2); padding: 15px; border-radius: 8px;
            border-left: 4px solid #2ecc71; margin: 15px 0;
        }
        .test-btn {
            background: linear-gradient(45deg, #00b894, #00a085); border: none;
            padding: 15px 30px; border-radius: 25px; color: white; font-size: 16px;
            cursor: pointer; transition: all 0.3s; margin: 10px 5px;
        }
        .test-btn:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .back-btn {
            background: rgba(255, 255, 255, 0.2); border: none;
            padding: 10px 20px; border-radius: 20px; color: white;
            cursor: pointer; text-decoration: none; margin-bottom: 20px; display: inline-block;
        }
        .back-btn:hover { background: rgba(255, 255, 255, 0.3); }
        .info-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; }
        .info-item {
            background: rgba(0, 0, 0, 0.2); padding: 15px; border-radius: 10px;
            text-align: center;
        }
        .accounts-list {
            background: rgba(0, 0, 0, 0.3); padding: 15px; border-radius: 8px;
            font-family: monospace; font-size: 0.9em; margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="http://localhost:3000" class="back-btn">‚Üê Volver al Inicio</a>
        
        <div class="header">
            <h1>ü¶ä Conectar MetaMask a Ganache</h1>
            <p>Gu√≠a paso a paso para configurar tu billetera con la red local</p>
        </div>

        <!-- Informaci√≥n de Ganache -->
        <div class="step-card">
            <h3>üìã Informaci√≥n de tu red Ganache Local</h3>
            <div class="info-grid">
                <div class="info-item">
                    <h4>üåê URL de Red</h4>
                    <div class="code-box">http://127.0.0.1:8545</div>
                </div>
                <div class="info-item">
                    <h4>üÜî Chain ID</h4>
                    <div class="code-box">1337</div>
                </div>
            </div>
            <div class="success-box">
                ‚úÖ Tu red Ganache est√° funcionando correctamente
            </div>
        </div>

        <!-- Paso 1: Agregar Red -->
        <div class="step-card">
            <div class="step-number">1</div>
            <h3>üîß Agregar Red Personalizada a MetaMask</h3>
            <p><strong>1.1.</strong> Abre MetaMask y haz clic en el men√∫ de redes (arriba)</p>
            <p><strong>1.2.</strong> Selecciona "Agregar red" o "Add Network"</p>
            <p><strong>1.3.</strong> Haz clic en "Agregar una red manualmente"</p>
            <p><strong>1.4.</strong> Completa los siguientes datos:</p>
            
            <div class="code-box">
                <strong>Nombre de la red:</strong> Ganache Local<br>
                <strong>Nueva URL de RPC:</strong> http://127.0.0.1:8545<br>
                <strong>ID de cadena:</strong> 1337<br>
                <strong>S√≠mbolo de moneda:</strong> ETH<br>
                <strong>URL del explorador de bloques:</strong> (dejar vac√≠o)
            </div>
            
            <p><strong>1.5.</strong> Haz clic en "Guardar"</p>
            
            <div class="warning-box">
                ‚ö†Ô∏è <strong>Importante:</strong> Aseg√∫rate de que la URL sea exactamente <code>http://127.0.0.1:8545</code> (con http, no https)
            </div>
        </div>

        <!-- Paso 2: Importar Cuenta -->
        <div class="step-card">
            <div class="step-number">2</div>
            <h3>üîë Importar Cuenta de Prueba</h3>
            <p><strong>2.1.</strong> En MetaMask, haz clic en el icono de cuenta (arriba derecha)</p>
            <p><strong>2.2.</strong> Selecciona "Importar cuenta"</p>
            <p><strong>2.3.</strong> Copia y pega la siguiente clave privada:</p>
            
            <div class="code-box">
                <strong>Clave Privada (Account #0):</strong><br>
                0x4f3edf983ac636a65a842ce7c78d9aa706d3b113bce9c46f30d7d21715b23b1d
            </div>
            
            <p><strong>2.4.</strong> Haz clic en "Importar"</p>
            
            <div class="success-box">
                ‚úÖ Esta cuenta tendr√° 100 ETH para testing (saldo ilimitado)
            </div>
        </div>

        <!-- Paso 3: Verificar Conexi√≥n -->
        <div class="step-card">
            <div class="step-number">3</div>
            <h3>üß™ Verificar Conexi√≥n</h3>
            <p>Usa estos botones para verificar que todo funciona correctamente:</p>
            
            <button class="test-btn" onclick="testConnection()">üîó Probar Conexi√≥n</button>
            <button class="test-btn" onclick="checkNetwork()">üåê Verificar Red</button>
            <button class="test-btn" onclick="checkBalance()">üí∞ Ver Balance</button>
            
            <div id="test-results" style="margin-top: 20px;"></div>
        </div>

        <!-- Cuentas Disponibles -->
        <div class="step-card">
            <div class="step-number">4</div>
            <h3>üë• Cuentas Disponibles para Importar</h3>
            <p>Tu Ganache local tiene estas 10 cuentas con 100 ETH cada una:</p>
            
            <div class="accounts-list">
                <strong>Account #0:</strong> 0x90F8bf6A479f320ead074411a4B0e7944Ea8c9C1<br>
                <strong>Account #1:</strong> 0xFFcf8FDEE72ac11b5c542428B35eEF5769C409f0<br>
                <strong>Account #2:</strong> 0x22d491Bde2303f2f43325b2108D26f1eAbA1e32b<br>
                <strong>Account #3:</strong> 0xE11BA2b4D45Eaed5996Cd0823791E0C93114882d<br>
                <strong>Account #4:</strong> 0xd03ea8624C8C5987235048901fB614fDcA89b117<br>
                <strong>Account #5:</strong> 0x95cED938F7991cd0dFcb48F0a06a40FA1Af46EBC<br>
                <strong>Account #6:</strong> 0x3E5e9111Ae8eB78Fe1CC3bb8915d5D461F3Ef9A9<br>
                <strong>Account #7:</strong> 0x28a8746e75304c0780E011BEd21C72cD78cd535E<br>
                <strong>Account #8:</strong> 0xACa94ef8bD5ffEE41947b4585a84BdA5a3d3DA6E<br>
                <strong>Account #9:</strong> 0x1dF62f291b2E969fB0849d99D9Ce41e2F137006e
            </div>
            
            <div class="warning-box">
                ‚ö†Ô∏è <strong>Solo para testing:</strong> Estas claves son p√∫blicas y solo deben usarse en desarrollo local
            </div>
        </div>

        <!-- Enlaces R√°pidos -->
        <div class="step-card">
            <div class="step-number">5</div>
            <h3>üöÄ ¬°Listo para Jugar!</h3>
            <p>Una vez configurado MetaMask, puedes usar la aplicaci√≥n:</p>
            
            <div style="text-align: center; margin-top: 20px;">
                <a href="http://localhost:3000" class="test-btn">üè† Ir a la Aplicaci√≥n</a>
                <a href="http://localhost:8080/BingoChain/demo.html" class="test-btn">üéÆ Demo Directo</a>
            </div>
        </div>
    </div>

    <script>
        async function testConnection() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div style="background: rgba(241, 196, 15, 0.2); padding: 10px; border-radius: 5px;">üîÑ Probando conexi√≥n...</div>';
            
            try {
                if (typeof window.ethereum === 'undefined') {
                    throw new Error('MetaMask no est√° instalado');
                }
                
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                
                let result = '<div style="background: rgba(46, 204, 113, 0.2); padding: 10px; border-radius: 5px;">';
                result += '‚úÖ <strong>Conexi√≥n exitosa!</strong><br>';
                result += `üè† Cuenta conectada: ${accounts[0]}<br>`;
                result += `üåê Chain ID: ${chainId} ${chainId === '0x539' ? '(‚úÖ Ganache)' : '(‚ùå Red incorrecta)'}`;
                result += '</div>';
                
                resultsDiv.innerHTML = result;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div style="background: rgba(231, 76, 60, 0.2); padding: 10px; border-radius: 5px;">‚ùå Error: ${error.message}</div>`;
            }
        }
        
        async function checkNetwork() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div style="background: rgba(241, 196, 15, 0.2); padding: 10px; border-radius: 5px;">üîÑ Verificando red...</div>';
            
            try {
                const chainId = await window.ethereum.request({ method: 'eth_chainId' });
                const networkVersion = await window.ethereum.request({ method: 'net_version' });
                
                let result = '<div style="background: rgba(46, 204, 113, 0.2); padding: 10px; border-radius: 5px;">';
                result += 'üåê <strong>Informaci√≥n de Red:</strong><br>';
                result += `Chain ID: ${chainId}<br>`;
                result += `Network Version: ${networkVersion}<br>`;
                result += `Estado: ${chainId === '0x539' ? '‚úÖ Conectado a Ganache' : '‚ùå Red incorrecta'}`;
                result += '</div>';
                
                resultsDiv.innerHTML = result;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div style="background: rgba(231, 76, 60, 0.2); padding: 10px; border-radius: 5px;">‚ùå Error: ${error.message}</div>`;
            }
        }
        
        async function checkBalance() {
            const resultsDiv = document.getElementById('test-results');
            resultsDiv.innerHTML = '<div style="background: rgba(241, 196, 15, 0.2); padding: 10px; border-radius: 5px;">üîÑ Consultando balance...</div>';
            
            try {
                const accounts = await window.ethereum.request({ method: 'eth_requestAccounts' });
                const balance = await window.ethereum.request({ 
                    method: 'eth_getBalance',
                    params: [accounts[0], 'latest']
                });
                
                // Convertir de wei a ETH
                const ethBalance = parseInt(balance, 16) / Math.pow(10, 18);
                
                let result = '<div style="background: rgba(46, 204, 113, 0.2); padding: 10px; border-radius: 5px;">';
                result += 'üí∞ <strong>Balance de la cuenta:</strong><br>';
                result += `${ethBalance.toFixed(4)} ETH`;
                result += '</div>';
                
                resultsDiv.innerHTML = result;
                
            } catch (error) {
                resultsDiv.innerHTML = `<div style="background: rgba(231, 76, 60, 0.2); padding: 10px; border-radius: 5px;">‚ùå Error: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>
